<html>
<head>
<title>PWA ガンマン</title>

<script type="text/javascript" src="jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="GunClock.jQuery.js"></script>
<!--<script src="manup.js"></script>-->
<link rel="manifest" href="manifest.json"></link>
<script src="pwabuilder-sw-register.js"></script>

<meta http-equiv="Content-type"
         content="text/html; charset=UTF-8">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="gunman">
<link rel="apple-touch-icon" href="icon/gun_eyes.72x72.png" sizes="72x72">
<link rel="apple-touch-icon" href="icon/gun_eyes.114x114.png" sizes="114x114">
<link rel="apple-touch-icon" href="icon/gun_eyes.120x120.png" sizes="120x120">
<link rel="apple-touch-icon" href="icon/gun_eyes.144x144.png" sizes="144x144">
<link rel="apple-touch-icon" href="icon/gun_eyes.192x192.png" sizes="192x192">



<script type="text/javascript">
window.addEventListener("deviceorientation", handleOrientation, true);

function handleOrientation(event){
//    var absolute = event.absolute;
    var alpha    = event.alpha;
    var beta     = event.beta;
    var gamma    = event.gamma;

//    document.getElementById('absolute').value = absolute;
    document.getElementById('alpha').value = alpha;
    document.getElementById('beta').value = beta;
    document.getElementById('gamma').value = gamma;

    var degree = (-1) * gamma;

//    $("#rotate").css('transform', "rotate(" + degree + "deg)");
    $("#rotate").css('transform', "rotateX(" + (180+beta) + "deg) rotateY(" + (180+gamma) + "deg) rotateZ(" + (180+alpha) + "deg)");
//    $("#rotate").css('-ms-transform', "rotate(" + degree + "deg)");
//    $("#rotate").css('-webkit-transform', "rotate(" + degree + "deg)");
    $("#rotate").css('-webkit-transform', "rotateX(" + (180+beta) + "deg) rotateY(" + (180+gamma) + "deg) rotateZ(" + (180+alpha) + "deg)");

}
</script>

<style>
ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #333;
}

li {
    float: left;
    color: white;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
}
</style>

</head>

<body>
<center>
<!--<h1 style="color: #ffffff; background-color: #0000cc; padding: 30px" align="left">PWAガンマン</h1>-->
<ul>
<li>PWAガンマン</li>
</ul>


<div id="ttt">
PWA版のガンマン時計です。<br>
(PWA: Progressive Web Apps)<p>

ホーム画面に追加をしてみてください。<br>
アプリのように起動できるはず。<p>
端末の回転センサーも使ってみました。<p>
<hr width=80%>
</div>
<div id="ttt2">
&nbsp;<p>&nbsp;<p>&nbsp;<p>
</div>

<script type="text/javascript">
function getParam(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

p = getParam('PWA');
if ( p == "on" ) {
  document.getElementById("ttt").style.display="none";
  document.getElementById("ttt2").style.display="block";
} else {
  document.getElementById("ttt").style.display="block";
  document.getElementById("ttt2").style.display="none";
}
</script>


<p>

<div id="rotate"><font size="+3">
<pre id="GunClock"></pre></font>
</div>

<p>

<form>
clockSize : 
<input type="text" size="2" id="clockSize" name="clockSize" value="25">
</form>

<p>
<!--
absolute: <input type="text" size="5" id="absolute" value="0">
-->
alpha: <input type="text" size="5" id="alpha" value="0">
beta: <input type="text" size="5" id="beta" value="0">
gamma: <input type="text" size="5" id="gamma" value="0">

<hr width=80%>

<!--
[ <a href="../index.html">ガンマンのページへ戻る</a> ]
-->
[ <a href="http://fc.jpn.org/ryuba/gunman/index.html">ガンマンのページへ戻る</a> ]

</center>
</body>
</html>